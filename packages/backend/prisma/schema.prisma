generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model SkuLocation {
  sku_id               String
  size_id              String?
  product_id           String?
  department_id        String?
  department_desc      String?
  sub_department_id    String?
  sub_department_desc  String?
  style_id             String?
  style_desc           String?
  season_id            String?
  season_desc          String?
  gender_id            String?
  gender_desc          String?
  location_id          String
  location_desc        String?
  country_id           String?
  country_desc         String?
  location_type_id     String?
  location_type_desc   String?
  region_id            String?
  region_desc          String?
  location_groups_map  LocationGroupMap[]
  product_groups_map   ProductGroupMap[]
  sku_location_metrics SkuLocationMetric?

  @@id([sku_id, location_id])
  @@map("sku_locations")
}

model SkuLocationMetric {
  sku_id                    String
  location_id               String
  sales_l30d                Int
  sales_l60d                Int
  sales_l90d                Int
  inventory                 Int
  pending_from_production   Int
  recommended_ia            Int
  unconstrained_ia          Int
  user_ia                   Int?
  assortment_recommendation Boolean
  assorted                  Boolean?
  sku_location              SkuLocation @relation(fields: [sku_id, location_id], references: [sku_id, location_id])

  @@unique([sku_id, location_id])
  @@map("sku_location_metrics")
}

model LocationGroupMap {
  sku_id        String
  location_id   String
  name          String
  sku_locations SkuLocation @relation(fields: [sku_id, location_id], references: [sku_id, location_id], onDelete: NoAction, onUpdate: NoAction, map: "sku_location_fk")

  @@id([sku_id, location_id, name])
  @@map("location_group_maps")
}

model ProductGroupMap {
  sku_id        String
  location_id   String
  name          String
  sku_locations SkuLocation @relation(fields: [sku_id, location_id], references: [sku_id, location_id], onDelete: NoAction, onUpdate: NoAction, map: "sku_location_fk")

  @@id([sku_id, location_id, name])
  @@map("product_group_maps")
}
